<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SecretShare â€” Reveal Secrets</title>
<style>
body {
  font-family: system-ui, sans-serif;
  background: #f6f8fa;
  color: #111;
  margin: 0;
  padding: 20px;
}
.container {
  max-width: 700px;
  margin: auto;
  background: #fff;
  border-radius: 14px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.08);
  padding: 20px;
}
h1 { text-align: center; color: #1d4ed8; }
textarea {
  width: 100%; min-height: 120px; resize: vertical;
  padding: 10px; border: 1px solid #ccc; border-radius: 8px;
}
button {
  margin: 5px; padding: 10px 16px;
  border: none; border-radius: 8px;
  cursor: pointer; font-weight: 600;
}
.primary { background: #2563eb; color: #fff; }
.danger { background: #dc2626; color: #fff; }
#list { margin-top: 10px; }
.secret-item {
  background: #f1f5f9; padding: 10px; border-radius: 8px;
  margin-bottom: 6px;
}
.linkbox {
  background: #f0fdf4;
  padding: 10px; border-radius: 8px;
  margin-top: 10px; word-wrap: break-word;
  border: 1px dashed #16a34a;
}
footer { margin-top: 20px; font-size: 13px; color: #555; text-align: center; }
</style>
</head>
<body>

<div class="container">
  <h1>ğŸ” SecretShare</h1>
  <p style="text-align:center;color:#555;">Write an anonymous secret and share it. Anyone with the link can see it.</p>

  <textarea id="secretInput" placeholder="Type your secret here..."></textarea>
  <div>
    <button id="saveBtn">ğŸ’¾ Save locally</button>
    <button id="shareBtn" class="primary">ğŸŒ Save & Generate Link</button>
    <button id="randomBtn">ğŸ² Show Random Secret</button>
    <button id="clearBtn" class="danger">ğŸ§¹ Clear All</button>
  </div>

  <div id="linkBox" class="linkbox" style="display:none;">
    <div><b>Shareable Link:</b></div>
    <div id="shareUrl"></div>
  </div>

  <div id="revealed" class="secret-item" style="display:none;">
    <div><b>Revealed Secret:</b></div>
    <div id="revealedText" style="white-space:pre-wrap;"></div>
  </div>

  <h3 style="margin-top:20px;">ğŸ“œ Your saved secrets:</h3>
  <div id="list"></div>

  <div id="msg" style="color:green;margin-top:10px;"></div>

  <footer>All secrets are saved only in your browser. No server used.</footer>
</div>

<script>
const secretInput = document.getElementById("secretInput");
const saveBtn = document.getElementById("saveBtn");
const shareBtn = document.getElementById("shareBtn");
const randomBtn = document.getElementById("randomBtn");
const clearBtn = document.getElementById("clearBtn");
const linkBox = document.getElementById("linkBox");
const shareUrl = document.getElementById("shareUrl");
const revealed = document.getElementById("revealed");
const revealedText = document.getElementById("revealedText");
const list = document.getElementById("list");
const msg = document.getElementById("msg");

function getSecrets() {
  return JSON.parse(localStorage.getItem("secrets") || "[]");
}

function saveSecrets(secrets) {
  localStorage.setItem("secrets", JSON.stringify(secrets));
  showSecrets();
}

function showSecrets() {
  const secrets = getSecrets();
  list.innerHTML = "";
  if (secrets.length === 0) list.innerHTML = "<i>No secrets saved yet.</i>";
  else secrets.forEach((s, i) => {
    const div = document.createElement("div");
    div.className = "secret-item";
    div.textContent = s;
    list.appendChild(div);
  });
}

// Save locally
saveBtn.onclick = () => {
  const txt = secretInput.value.trim();
  if (!txt) { msg.textContent = "Type a secret first!"; return; }
  const secrets = getSecrets();
  secrets.push(txt);
  saveSecrets(secrets);
  secretInput.value = "";
  msg.textContent = "âœ… Secret saved locally!";
  linkBox.style.display = "none";
};

// Generate shareable link
shareBtn.onclick = () => {
  const txt = secretInput.value.trim();
  if (!txt) { msg.textContent = "Type a secret first!"; return; }
  const encoded = btoa(encodeURIComponent(txt));
  const url = window.location.origin + window.location.pathname + "#secret=" + encoded;
  shareUrl.textContent = url;
  linkBox.style.display = "block";
  msg.textContent = "ğŸ”— Share this link with others.";
};

// Show random secret
randomBtn.onclick = () => {
  const secrets = getSecrets();
  if (secrets.length === 0) { msg.textContent = "No saved secrets."; return; }
  const random = secrets[Math.floor(Math.random() * secrets.length)];
  revealedText.textContent = random;
  revealed.style.display = "block";
  msg.textContent = "ğŸ‰ Random secret shown!";
};

// Clear all
clearBtn.onclick = () => {
  localStorage.removeItem("secrets");
  showSecrets();
  revealed.style.display = "none";
  linkBox.style.display = "none";
  msg.textContent = "ğŸ§¹ All secrets cleared.";
};

// If visiting with #secret= link
if (location.hash.startsWith("#secret=")) {
  const encoded = location.hash.slice(8);
  try {
    const decoded = decodeURIComponent(atob(encoded));
    revealedText.textContent = decoded;
    revealed.style.display = "block";
    msg.textContent = "ğŸ’¬ Secret revealed from shared link!";
  } catch (e) {
    msg.textContent = "âŒ Invalid secret link.";
  }
}

showSecrets();
</script>

</body>
</html>
